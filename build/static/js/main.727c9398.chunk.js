(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(18),c=n.n(u),o=n(19),l=n(8),i=n(3),s=function(e){var t=e.filter,n=e.handleChangeFilter;return a.a.createElement("div",null,"filter shown with"," ",a.a.createElement("input",{value:t,onChange:n}))},m=function(e){var t=e.addPerson,n=e.newName,r=e.handleChangeName,u=e.newNumber,c=e.handleChangeNumber;return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{value:n,onChange:r,placeholder:"Enter your name here...",required:!0})),a.a.createElement("div",null,"phone:"," ",a.a.createElement("input",{value:u,onChange:c,placeholder:"Enter your Phone no here...",required:!0})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"))))},f=function(e){var t=e.newPersons,n=e.handleDelete;return a.a.createElement("div",null,t.length>0?t.map((function(e){return a.a.createElement("p",{key:e.id},e.name," ",e.number," ",a.a.createElement("button",{onClick:function(){return n(e)}},"Delete"))})):a.a.createElement("p",null,"No such contacts"))},d=n(2),h=n.n(d),p=n(5),b=n(6),v=n.n(b),w="/api/persons",E={getAll:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(w);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(w,t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(t.name,"?"))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.a.delete("".concat(w,"/").concat(t.id));case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("".concat(t.name," is already added to the phonebook,replace the old one with the new one?"))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.a.put("".concat(w,"/").concat(t.id),n);case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},j=function(e){var t=e.message,n=e.result;if(null===t)return null;var r=n?"#44bd32":"#ff3f34";return a.a.createElement("div",{className:"error",style:{color:r}},t)},O=function(){Object(r.useEffect)((function(){E.getAll().then((function(e){return u(e)}))}),[]);var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],c=Object(r.useState)(""),d=Object(i.a)(c,2),h=d[0],p=d[1],b=Object(r.useState)(""),v=Object(i.a)(b,2),w=v[0],O=v[1],g=Object(r.useState)(""),k=Object(i.a)(g,2),C=k[0],y=k[1],x=Object(r.useState)(null),N=Object(i.a)(x,2),S=N[0],P=N[1],D=Object(r.useState)(!0),A=Object(i.a)(D,2),L=A[0],T=A[1],q=n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(j,{message:S,result:L}),a.a.createElement(s,{filter:C,handleChangeFilter:function(e){return y(e.target.value)}}),a.a.createElement("h2",null,"Add a new"),a.a.createElement(m,{newName:h,newNumber:w,addPerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name.toLowerCase()===h.toLowerCase()}));if(t)E.update(t,Object(l.a)(Object(l.a)({},t),{},{number:w})).then((function(e){u(n.map((function(t){return t.id===e.id?e:t}))),T(!0),P("Updated ".concat(t.name,"'s number")),setTimeout((function(){P(null)}),3e3),O(""),p("")}));else{var r={name:h,number:w};E.create(r).then((function(e){u([].concat(Object(o.a)(n),[e])),P("Added ".concat(e.name)),setTimeout((function(){P(null)}),3e3),p(""),O("")}))}},handleChangeName:function(e){return p(e.target.value)},handleChangeNumber:function(e){return O(e.target.value)}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(f,{newPersons:q,handleDelete:function(e){E.remove(e).then((function(t){return u(n.filter((function(t){return t.id!==e.id})))})).catch((function(t){T(!1),P("".concat(e.name," is already removed from the server")),setTimeout((function(){P(null)}),3e3),u(n.filter((function(t){return t.id!==e.id})))}))}}))};n(43);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.727c9398.chunk.js.map